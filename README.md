# auth2
POC for using Postgrest and Keycloak to manage authentifications and authorizations

## Initial realm configuration

In keycloak create a `n4brain` realm. Create a `n4b_auth` client. Create a `n4b_auth_admin` role in `n4b_auth`. Assign many roles from `realm-management` to `n4b_auth_admin`. Create a user and give it the role `n4b_auth_admin`.

The resulting realm is exported in `keycloak-import/n4brain-realm-origin.json` to be automatically imported when creating keycloak container. To export the realm, run:
```
${n4b_auth}/export_realm
```
This will create a `${n4b_auth}/keycloak-import/n4brain-realm.json` that may be used to replace `${n4b_auth}/keycloak-import/n4brain-realm-origin.json`. Warning: the generated file is owned by `root` because it is generated by Keycloak from a container.



